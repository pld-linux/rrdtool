--- contrib/php4/acinclude.m4~	2003-08-27 21:23:50.000000000 +0200
+++ contrib/php4/acinclude.m4	2004-08-26 13:53:07.000000000 +0200
@@ -193,8 +193,8 @@
     if test -r $i/include/openssl/evp.h; then
       OPENSSL_INCDIR=$i/include
     fi
-    if test -r $i/lib/libssl.a -o -r $i/lib/libssl.$SHLIB_SUFFIX_NAME; then
-      OPENSSL_LIBDIR=$i/lib
+    if test -r $libdir/libssl.a -o -r $libdir/libssl.$SHLIB_SUFFIX_NAME; then
+      OPENSSL_LIBDIR=$libdir
     fi
   done
 
@@ -699,7 +699,7 @@
 AC_MSG_CHECKING([if compiler supports -R])
 AC_CACHE_VAL(php_cv_cc_dashr,[
 	SAVE_LIBS=$LIBS
-	LIBS="-R /usr/lib $LIBS"
+	LIBS="-R $libdir $LIBS"
 	AC_TRY_LINK([], [], php_cv_cc_dashr=yes, php_cv_cc_dashr=no)
 	LIBS=$SAVE_LIBS])
 AC_MSG_RESULT([$php_cv_cc_dashr])
@@ -709,7 +709,7 @@
 	AC_MSG_CHECKING([if compiler supports -Wl,-rpath,])
 	AC_CACHE_VAL(php_cv_cc_rpath,[
 		SAVE_LIBS=$LIBS
-		LIBS="-Wl,-rpath,/usr/lib $LIBS"
+		LIBS="-Wl,-rpath,$libdir $LIBS"
 		AC_TRY_LINK([], [], php_cv_cc_rpath=yes, php_cv_cc_rpath=no)
 		LIBS=$SAVE_LIBS])
 	AC_MSG_RESULT([$php_cv_cc_rpath])
@@ -893,7 +893,7 @@
 dnl add a library to linkpath/runpath
 dnl
 AC_DEFUN([PHP_ADD_LIBPATH],[
-  if test "$1" != "/usr/lib"; then
+  if test "$1" != "$libdir"; then
     PHP_EXPAND_PATH($1, ai_p)
     ifelse([$2],,[
       _PHP_ADD_LIBPATH_GLOBAL([$ai_p])
